# Arch Reproducible Build Effort

Arch Linux wants to have reproducible, byte for byte identical packages in our repositories.
Reproducible builds is an effort which is not unique to Arch, many other distros have made a lot of
progress towards this goal. More information about reproducible builds in depth can be found here
https://reproducible-builds.org/.

# What does this mean for Arch users?

Every Arch user can reproduce a package from the repository locally on his own hardware. The only
requirement for reproducing is a .pkg.tar.xz file. Simply stated, the hash of the provided
.pkg.tar.xz should match the user build .pkg.tar.xz, this proves that the Arch packages have not
tampered the source code or the build binary in the pkg.tar.xz.

# A package is not reproducible, what happened?

A package can be not reproducible due to various reasons, a timestamp generated by autotools, a
non-deterministic build or worse, a private key generated when the package is build. To figure out
what is different between your local build package and the repository package, run diffoscope on
both packages which displays the difference of the two packages. https://diffoscope.org/

# Current status

Currently Arch Linux is working on support reproducible packages integration and of course any help
is welcome. A working rebuilder is set up which rebuilds the repository packages twice in different
env's. This rebuilder uses pacman-git since reproducible requires support for BUILDINFO files which
save the build environment so it can be reproduced locally. (pacman packages, locale, etc...)

Link to Patches!

https://tests.reproducible-builds.org/archlinux/archlinux.html

# Help

* Figure out how to work around SSL issues when rebuilding packages in the future for SVN/HG
* Write a rebuilder specifiction https://github.com/Foxboron/devtools-repro/issues/15
* Write a rebuilder for users
* Write a development rebuilder, which is easy to use to easily work on reproducible build issues.
* Work on non-reproducbile packages (cross-reference with Debian), discuss in
#archlinux-reproducible or oftc.net #reproducible-builds.
* BUILDINFO integration in Archweb?
* Work on the Archive cleanup

# TODO

This document should inform the reader about the reproducible build effort for Arch and how it
effects them in a positive way (reproducibility!). We shouldn't explain the reproducible build
principles in depth, there are a lot of awesome resources already such as the reprodcubile build
website. After explaining this, it should inform the of the current status, what is available and
how it works and what is left todo and how the reader can help!

